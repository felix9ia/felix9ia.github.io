(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{527:function(e,r,t){"use strict";t.r(r);var o=t(1),_=Object(o.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"go-多模块构建方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-多模块构建方案"}},[e._v("#")]),e._v(" Go 多模块构建方案")]),e._v(" "),t("p",[e._v("思考：为什么 Golang 没有像 "),t("code",[e._v("Maven")]),e._v(" 或者 "),t("code",[e._v("Cargo")]),e._v(" 的构建工具？")]),e._v(" "),t("p",[e._v("个人猜测是遵循了"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%A5%A5%E5%8D%A1%E5%A7%86%E5%89%83%E5%88%80",target:"_blank",rel:"noopener noreferrer"}},[e._v("奥卡姆剃刀"),t("OutboundLink")],1),e._v(" 的"),t("code",[e._v("Do not multiply entities beyond necessity")]),e._v("的设计哲学。")]),e._v(" "),t("blockquote",[t("p",[e._v("“切勿浪费多余工夫去做本可以较少工夫完成之事”")])]),e._v(" "),t("blockquote",[t("p",[e._v("​\t在"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E7%A7%91%E5%AD%A6",target:"_blank",rel:"noopener noreferrer"}},[e._v("自然科学"),t("OutboundLink")],1),e._v("中，奥卡姆剃刀被作为"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%90%AF%E5%8F%91%E6%B3%95",target:"_blank",rel:"noopener noreferrer"}},[e._v("启发法"),t("OutboundLink")],1),e._v("技巧来使用，更多地作为帮助"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%A7%91%E5%AD%A6%E5%AE%B6",target:"_blank",rel:"noopener noreferrer"}},[e._v("科学家"),t("OutboundLink")],1),e._v("发展理论模型的工具，而不是在已经发表的理论之间充当裁判角色。["),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%A5%A5%E5%8D%A1%E5%A7%86%E5%89%83%E5%88%80#cite_note-fn_(100)-7",target:"_blank",rel:"noopener noreferrer"}},[e._v("7]"),t("OutboundLink")],1),e._v("["),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%A5%A5%E5%8D%A1%E5%A7%86%E5%89%83%E5%88%80#cite_note-fn_(101)-8",target:"_blank",rel:"noopener noreferrer"}},[e._v("8]"),t("OutboundLink")],1),e._v("在"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%A7%91%E5%AD%A6%E6%96%B9%E6%B3%95",target:"_blank",rel:"noopener noreferrer"}},[e._v("科学方法"),t("OutboundLink")],1),e._v("中，奥卡姆剃刀并没有被当做逻辑上不可辩驳的定理或者科学结论。在科学方法中对简单性的偏好，是基于"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%8F%AF%E8%AF%81%E4%BC%AA%E6%80%A7",target:"_blank",rel:"noopener noreferrer"}},[e._v("可证伪性"),t("OutboundLink")],1),e._v("的标准。对于某个现象的所有可接受的解释，都存在无数个可能的、更为复杂的变体：因为你可以把任何解释中的错误归结于"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%89%B9%E4%BE%8B%E5%81%87%E8%A8%AD",target:"_blank",rel:"noopener noreferrer"}},[e._v("特例假设"),t("OutboundLink")],1),e._v("，从而避免该错误的发生。所以，较简单的理论比复杂的理论更好，因为它们更加可检验。")])]),e._v(" "),t("p",[e._v("这其实就是师父一直强调的:")]),e._v(" "),t("blockquote",[t("p",[e._v("”把复杂的事情简单化，而不是把简单的事情复杂化”")])]),e._v(" "),t("p",[e._v("在我最近的工程实践中，我个人总结出了两种构建方案，而后者我认为是比较优质的，甚至我猜测这就是官方的思路。")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Makefile 构建")]),e._v(" "),t("p",[e._v("这里主要参考了"),t("a",{attrs:{href:"https://github.com/apache/dubbo-go-samples",target:"_blank",rel:"noopener noreferrer"}},[e._v("dubbo-go-samples"),t("OutboundLink")],1),e._v(" 提供的 "),t("a",{attrs:{href:"https://github.com/apache/dubbo-go-samples/blob/master/build/Makefile",target:"_blank",rel:"noopener noreferrer"}},[e._v("build/Makefile"),t("OutboundLink")],1),e._v(" 的构建方案。")])]),e._v(" "),t("li",[t("p",[e._v("容器化构建")]),e._v(" "),t("p",[e._v("使用 "),t("code",[e._v("docker-compose.yml")]),e._v(" 进行容器化的构建，这个方案不仅可以构建单体应用，而且是可以作为单主机容器编排工具使用的。")])])]),e._v(" "),t("p",[e._v("这倒是给了我以下经验：")]),e._v(" "),t("ul",[t("li",[e._v("当做一个方案前，一定要思考为什么要做这个方案，为什么现有的方案没有很好的解决这个问题？避免造轮子走弯路。")]),e._v(" "),t("li",[e._v("而如果一个新方案牵扯到了许多的新的工具链，应该有足够的勇气去尝试实践，因为拿着旧地图永远找不到新大陆。")])]),e._v(" "),t("p",[e._v("因为一旦你的方案做偏了，后面我们会需要花大量的时间在弥补旧方案带来的不足，而这些补丁会让整个方案犹如没有基础的楼阁，岌岌可危。而且越往后面，迭代成本可能会越来越高。我们做方案本身求的可持续和性价比。所以前期的不调研和思考，会带来后期的种种困难和成本。")]),e._v(" "),t("p",[e._v("但我还会有个疑惑，人在对方案下的工具都未知的情况下，且没有很好的实践时应该怎么做？")]),e._v(" "),t("p",[e._v("我现在的解决方案就是：")]),e._v(" "),t("ul",[t("li",[e._v("去科学上网 Google 资料，看最前沿的实践文章")]),e._v(" "),t("li",[e._v("开源项目直接提 Issue，和开发者面对面")])]),e._v(" "),t("p",[e._v("自己现在的做事遵从以下原则：")]),e._v(" "),t("ul",[t("li",[e._v("避险")]),e._v(" "),t("li",[e._v("高收益")]),e._v(" "),t("li",[e._v("稳定的可持续")]),e._v(" "),t("li",[e._v("迭代周期足够短")])]),e._v(" "),t("p",[e._v("虽然有些不可能三角的意味，但这不就是做方案的有趣之处 - 平衡，这都比盲目的去造轮子的收益。")]),e._v(" "),t("p",[e._v("待续，我要继续做项目的 "),t("code",[e._v("docker-compose.yml")]),e._v("实践了。")]),e._v(" "),t("h2",{attrs:{id:"教训"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#教训"}},[e._v("#")]),e._v(" 教训")]),e._v(" "),t("p",[e._v("这次教训惨痛，在时间 "),t("code",[e._v("docker")]),e._v(" 的 "),t("code",[e._v("networks")]),e._v(" 部分，由于没有从一开始看手册，导致摸索了很久才知道 "),t("code",[e._v("docker network ls")]),e._v(" 这条指令。这里要感谢 "),t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/137539975",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker容器网络 - 同一个host下的容器间通信"),t("OutboundLink")],1),e._v(" 这篇文章引路。但也要抱怨一下，我找了很多文章才找到，甚至是官方文档，官网应该把 docker-compose 的方式作为主要的方式来进行文章的书写，而不是命令行的方式。")]),e._v(" "),t("p",[e._v("所以，今后一定在实践一个框架的时候，一定要把它的全貌了解的差不多，再去实践细节。")])])}),[],!1,null,null,null);r.default=_.exports}}]);