(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{540:function(n,a,s){"use strict";s.r(a);var e=s(1),r=Object(e.a)({},(function(){var n=this,a=n.$createElement,s=n._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"spring-打包相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-打包相关"}},[n._v("#")]),n._v(" Spring 打包相关")]),n._v(" "),s("p",[n._v("以下是对打包流程的梳理：")]),n._v(" "),s("h2",{attrs:{id:"打包方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包方式"}},[n._v("#")]),n._v(" 打包方式：")]),n._v(" "),s("h3",{attrs:{id:"_1-spring-boot-maven-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-spring-boot-maven-plugin"}},[n._v("#")]),n._v(" 1. spring-boot-maven-plugin")]),n._v(" "),s("p",[n._v("涉及到的插件如下：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("            <plugin>\n                 <groupId>org.springframework.boot</groupId>\n                 <artifactId>spring-boot-maven-plugin</artifactId>\n                 <executions>\n                     <execution>\n                         <goals>\n                             <goal>repackage</goal>\n                         </goals>\n                     </execution>\n                 </executions>\n             </plugin>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br")])]),s("p",[n._v("特点是，将应用程序和相应的依赖都打包到一个独立的jar当中，打出来的是"),s("code",[n._v("fat jar")]),n._v("，可以直接运行。")]),n._v(" "),s("p",[n._v("带有以下目录")]),n._v(" "),s("ul",[s("li",[n._v("lib 目录")]),n._v(" "),s("li",[n._v("spring boot loader 相关类")])]),n._v(" "),s("h3",{attrs:{id:"_2-maven-jar-plugin-maven-dependency-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-maven-jar-plugin-maven-dependency-plugin"}},[n._v("#")]),n._v(" 2. maven-jar-plugin + maven-dependency-plugin")]),n._v(" "),s("p",[s("strong",[n._v("maven-jar-plugin")]),n._v("：")]),n._v(" "),s("p",[n._v("提供 "),s("code",[n._v("manifest")]),n._v(" 配置，只包括当前模块的 jar，不包含依赖 jar，无法直接启动。")]),n._v(" "),s("p",[n._v("优点是结合 "),s("code",[n._v("maven-assembly-plugin")]),n._v(" 打成压缩文件, 以后只需要传送更改项目 jar 包即可。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-jar-plugin</artifactId>\n            </plugin>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[s("strong",[n._v("maven-dependency-plugin：")])]),n._v(" "),s("p",[n._v("负责拷贝到 lib 目录, 用得最多的几个操作：copy, copy-dependencies")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("  <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-dependency-plugin</artifactId>\n                <version>3.1.0</version>\n                <executions>\n                    <execution>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>copy-dependencies</goal>\n                        </goals>\n                        <configuration>\n                            \x3c!--输出位置--\x3e\n                                  <outputDirectory>${project.build.directory}/lib</outputDirectory>\n                            <overWriteReleases>false</overWriteReleases>\n                            <overWriteSnapshots>false</overWriteSnapshots>\n                            <overWriteIfNewer>true</overWriteIfNewer>\n                            <includeScope>compile</includeScope>\n                        </configuration>\n                    </execution>\n                </executions>\n            </plugin>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br")])]),s("h3",{attrs:{id:"_3-maven-assembly-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-maven-assembly-plugin"}},[n._v("#")]),n._v(" 3. maven-assembly-plugin：")]),n._v(" "),s("p",[n._v("会把项目中的所有文件全部都放到一个文件当中：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("     <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-assembly-plugin</artifactId>\n                <version>3.1.0</version>\n                <configuration>\n                    <descriptors>\n                        <descriptor>src/main/assembly/assembly.xml</descriptor>\n                    </descriptors>\n                    <archive>\n                        <manifest>\n                            <mainClass>ai.neuvision.NvmAdminApplication</mainClass>\n                        </manifest>\n                    </archive>\n                </configuration>\n                <executions>\n                    <execution>\n                        <id>make-assembly</id>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>single</goal>\n                        </goals>\n\n                    </execution>\n                </executions>\n            </plugin>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br")])]),s("h3",{attrs:{id:"_4-maven-shade-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-maven-shade-plugin"}},[n._v("#")]),n._v(" 4. maven-shade-plugin")]),n._v(" "),s("p",[n._v("生成的 jar 文件包含了所有的依赖，")]),n._v(" "),s("h2",{attrs:{id:"其他相关包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他相关包"}},[n._v("#")]),n._v(" 其他相关包")]),n._v(" "),s("ol",[s("li",[s("p",[n._v("maven-dependency-plugin")]),n._v(" "),s("p",[n._v("复制项目的依赖包到指定目录")])]),n._v(" "),s("li",[s("p",[n._v("maven-resources-plugin")])])]),n._v(" "),s("p",[n._v("还有一些其他环节的包")]),n._v(" "),s("h3",{attrs:{id:"maven-compiler-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#maven-compiler-plugin"}},[n._v("#")]),n._v(" maven-compiler-plugin")]),n._v(" "),s("p",[n._v("在 compile 阶段起作用，和 package 无关")]),n._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[n._v("#")]),n._v(" 参考")]),n._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/fnlingnzb-learner/p/11119799.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("Maven打包的三种方式"),s("OutboundLink")],1)]),n._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/weixin_41763571/article/details/117780466",target:"_blank",rel:"noopener noreferrer"}},[n._v("spring-boot-maven-plugin和maven-jar-plugin的区别"),s("OutboundLink")],1)]),n._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/sinat_37729104/article/details/103118911?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-3.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-3.control",target:"_blank",rel:"noopener noreferrer"}},[n._v("spring boot中打包插件spring-boot-maven-plugin和maven-jar-plugin的关联"),s("OutboundLink")],1)]),n._v(" "),s("p",[s("a",{attrs:{href:"https://www.jianshu.com/p/1580e7220cd3",target:"_blank",rel:"noopener noreferrer"}},[n._v("Spring Boot项目使用maven-assembly-plugin根据不同环境打包成tar.gz或者zip"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);